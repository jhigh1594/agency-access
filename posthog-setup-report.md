# PostHog Post-Wizard Report

The wizard has completed a deep integration of PostHog analytics into your Agency Access Platform. This integration tracks the complete user journey from agency onboarding through client authorization, with rich event properties that enable detailed analysis of user behavior, conversion funnels, and platform engagement patterns.

## Integration Summary

### Configuration Files Created/Modified:
- **`apps/web/instrumentation-client.ts`** - PostHog client initialization with error tracking and debug mode
- **`apps/web/next.config.ts`** - Added reverse proxy rewrites to avoid ad blockers
- **`apps/web/.env.local`** - Added `NEXT_PUBLIC_POSTHOG_KEY` and `NEXT_PUBLIC_POSTHOG_HOST` environment variables

### Package Installed:
- `posthog-js` - Client-side analytics SDK

## Events Instrumented

| Event Name | Description | File Path |
|------------|-------------|-----------|
| `agency_created` | Agency completes onboarding and creates their agency profile | `apps/web/src/app/onboarding/agency/page.tsx` |
| `team_member_invited` | Agency invites team members during onboarding | `apps/web/src/app/onboarding/agency/page.tsx` |
| `access_request_created` | Agency creates a new access request for a client | `apps/web/src/contexts/access-request-context.tsx` |
| `template_saved` | User saves current wizard configuration as a reusable template | `apps/web/src/components/save-as-template-modal.tsx` |
| `platform_connected` | Agency successfully connects a platform via OAuth | `apps/web/src/app/(authenticated)/connections/page.tsx` |
| `platform_disconnected` | Agency disconnects a platform from their account | `apps/web/src/app/(authenticated)/connections/page.tsx` |
| `oauth_callback_success` | OAuth callback completed successfully for a platform | `apps/web/src/app/platforms/callback/page.tsx` |
| `oauth_callback_error` | OAuth callback failed with an error | `apps/web/src/app/platforms/callback/page.tsx` |
| `client_authorization_started` | Client begins the authorization flow from an invite link | `apps/web/src/app/invite/[token]/page.tsx` |
| `client_authorization_completed` | Client completes all platform authorizations in the invite flow | `apps/web/src/app/invite/[token]/page.tsx` |
| `client_platform_authorized` | Client authorizes a single platform during the invite flow | `apps/web/src/app/invite/[token]/page.tsx` |
| `meta_business_portfolio_selected` | User selects a Meta Business Portfolio after OAuth | `apps/web/src/app/platforms/callback/page.tsx` |
| `meta_assets_selected` | Client selects Meta assets (ad accounts, pages, Instagram) during authorization | `apps/web/src/components/client-auth/MetaAssetSelector.tsx` |
| `dashboard_viewed` | User views the main dashboard (top of funnel for engagement) | `apps/web/src/app/(authenticated)/dashboard/page.tsx` |

## Next Steps

We've built some insights and a dashboard for you to keep an eye on user behavior, based on the events we just instrumented:

### Dashboard
- **[Analytics Basics](https://us.posthog.com/project/309879/dashboard/1266303)** - Core metrics dashboard for tracking agency onboarding, access requests, and platform connections

### Insights
- **[Core Activity Trends](https://us.posthog.com/project/309879/insights/vLeoaU0k)** - Daily trend of agencies created, access requests, and client authorizations
- **[Client Authorization Funnel](https://us.posthog.com/project/309879/insights/OeB2e52e)** - Conversion funnel from access request creation to client authorization completion
- **[Platform Connection Activity](https://us.posthog.com/project/309879/insights/NC5gEFMt)** - Track platform connections and disconnections to monitor churn
- **[OAuth Success vs Errors](https://us.posthog.com/project/309879/insights/t0gR6Qw2)** - Monitor OAuth callback success and error rates for platform integrations
- **[User Engagement](https://us.posthog.com/project/309879/insights/M5ouymxL)** - Track dashboard views and unique daily active users

### Agent Skill

We've left an agent skill folder in your project at `.claude/skills/posthog-nextjs-app-router/`. You can use this context for further agent development when using Claude Code. This will help ensure the model provides the most up-to-date approaches for integrating PostHog, including:

- Next.js App Router best practices
- User identification patterns
- Event tracking conventions
- Feature flag implementation
- A/B testing setup

---

*Generated by PostHog Setup Wizard - February 10, 2026*
